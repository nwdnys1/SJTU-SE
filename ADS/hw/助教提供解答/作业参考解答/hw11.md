<!-- 起始时间17:39 -->
# HW11 多线程同步练习
## 朴素实现
代码见 `hw11-code/v1` 。初始化完成后的吞吐量如下。

并发数 | 吞吐量 (M op / s)
---|---
1 | 60.7
2 | 17.6
4 | 17.6
8 | 14.6

## 进阶实现
使用double-checked locking。代码见 `hw11-code/v2` 。

并发数 | 吞吐量 (M op / s)
---|---
1 | 419.8
2 | 1019.8
4 | 1968.3
8 | 3957.6

<!-- 结束时间17:51 -->
<!-- 开始时间19:42 -->
## 放松内存顺序要求
在RISC-V等弱内存序的机器上，用默认的顺序一致性要求过严了。放松到release/acquire，性能提升。

代码见 `hw11-code/v3` 。在BPI-F3开发板上的运行性能如下。

并发数 | v2的吞吐量 (M op / s) | v3的吞吐量 (M op / s)
---|---|---
1 | 61.0 | 92.7
2 | 122.3 | 187.6
4 | 243.2 | 374.1
8 | 485.0 | 742.7

## 使用notify/wait
……
<!-- 结束时间19:56 -->